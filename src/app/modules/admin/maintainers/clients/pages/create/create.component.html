<div *transloco="let t; read: 'maintainers.client.new'" class="flex flex-col min-w-0 w-full">
    <page-detail-header
        [subtitle]="t('description')"
        [title]="t('title')"
    ></page-detail-header>
    <!-- Content -->
    <div class="flex-1 flex flex-col w-full max-w-xs sm:max-w-5xl mx-auto py-4 sm:px-4">
        <!-- Content -->
        <form [formGroup]="clientForm" class="flex flex-col items-center gap-y-4 w-full md:w-1/2 py-4">
            <!-- Fields: businessName, fantasyName, code, nationalId, email, phone -->
            <mat-form-field class="w-full" subscriptSizing="dynamic">
                <mat-label>{{ 'maintainers.client.fields.business-name' | transloco }}</mat-label>
                <input
                    [placeholder]="'maintainers.client.fields.business-name' | transloco"
                    formControlName="businessName"
                    matInput
                />
                <mat-error *ngIf="clientForm.controls.businessName.invalid">
                    {{ 'errors.form.required' | transloco }}
                </mat-error>
            </mat-form-field>

            <mat-form-field class="w-full" subscriptSizing="dynamic">
                <mat-label>{{ 'maintainers.client.fields.fantasy-name' | transloco }}</mat-label>
                <input
                    [placeholder]="'maintainers.client.fields.fantasy-name' | transloco"
                    formControlName="fantasyName"
                    matInput
                />
                <mat-error *ngIf="clientForm.controls.fantasyName.invalid">
                    {{ 'errors.form.required' | transloco }}
                </mat-error>
            </mat-form-field>

            <mat-form-field class="w-full" subscriptSizing="dynamic">
                <mat-label>{{ 'maintainers.client.fields.code' | transloco }}</mat-label>
                <!-- Pattern: only letters and numbers, no spaces or special characters -->
                <input
                    [placeholder]="'maintainers.client.fields.code' | transloco"
                    formControlName="code"
                    matInput
                    pattern="^[a-zA-Z0-9]*$"
                />
                <mat-error *ngIf="clientForm.controls.code.hasError('required')">
                    {{ 'errors.form.required' | transloco }}
                </mat-error>
                <mat-error *ngIf="clientForm.controls.code.hasError('pattern')">
                    {{ 'errors.form.pattern' | transloco: { pattern: '^[a-zA-Z0-9]*$' } }}
                </mat-error>
                <mat-hint>{{ 'maintainers.client.fields.code-hint' | transloco }}</mat-hint>
            </mat-form-field>

            <mat-form-field class="w-full" subscriptSizing="dynamic">
                <mat-label>{{ 'maintainers.client.fields.national-id' | transloco }}</mat-label>
                <input
                    [placeholder]="'maintainers.client.fields.national-id' | transloco"
                    formControlName="nationalId"
                    matInput
                />
                <mat-error *ngIf="clientForm.controls.nationalId.invalid">
                    {{ 'errors.form.required' | transloco }}
                </mat-error>
            </mat-form-field>

            <mat-form-field class="w-full" subscriptSizing="dynamic">
                <mat-label>{{ 'maintainers.client.fields.email' | transloco }}</mat-label>
                <input
                    [placeholder]="'maintainers.client.fields.email' | transloco"
                    formControlName="email"
                    matInput
                />
                <mat-error *ngIf="clientForm.controls.email.invalid">
                    {{ 'errors.form.required' | transloco }}
                </mat-error>
            </mat-form-field>

            <mat-form-field class="w-full" subscriptSizing="dynamic">
                <mat-label>{{ 'maintainers.client.fields.phone' | transloco }}</mat-label>
                <input
                    [placeholder]="'maintainers.client.fields.phone' | transloco"
                    formControlName="phone"
                    matInput
                />
                <mat-error *ngIf="clientForm.controls.phone.invalid">
                    {{ 'errors.form.required' | transloco }}
                </mat-error>
            </mat-form-field>

            <!-- Actions -->
            <div class="flex-0 pt-4 w-full flex md:justify-end flex-col md:flex-row sm:items-center gap-6">
                <!-- Reset -->
                <button
                    class="w-full md:w-30"
                    color="secondary"
                    mat-flat-button
                    type="reset"
                >
                    <span [innerText]="'actions.reset' | transloco"></span>
                </button>

                <button
                    (click)="submit()"
                    [disabled]="clientForm.disabled"
                    class="w-full md:w-30"
                    color="primary"
                    mat-flat-button
                    type="submit"
                >
                    <span *ngIf="!clientForm.disabled" [innerText]="'actions.save' | transloco"></span>
                    <mat-progress-spinner *ngIf="clientForm.disabled" [diameter]="24" [mode]="'indeterminate'"></mat-progress-spinner>
                </button>
            </div>
        </form>

    </div>
</div>
